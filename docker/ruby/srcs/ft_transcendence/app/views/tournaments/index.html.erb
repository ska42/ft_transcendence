<p id="notice"><%= notice %></p>

<h1>Tournaments</h1>

<table>
  <thead>
    <tr>
      <th>Mode</th>
      <th>Max player</th>
      <th>Registered</th>
      <th>Points award</th>
      <th>Start time</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tournaments.each do |tournament| %>
      <tr>
        <td><%= tournament.mode %></td>
        <td><%= tournament.max_player %></td>
        <td><%= tournament.users.count %></td>
        <td><%= tournament.points_award %></td>
        <td><%= tournament.start_time %></td>
        <td><%= link_to 'Show', tournament %></td>
        <% if Time.now < tournament.start_time and !current_user.tournaments.include?(tournament) %>
          <td><%= link_to 'Register', controller: "tournaments", action: "register", id: tournament.id %></td>
        <% elsif current_user.tournaments.include?(tournament) %>
          <td> Registered</td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
